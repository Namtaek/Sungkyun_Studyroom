## ----setup, include=FALSE-------------------------------------------------------------------------------------------------------------
knitr::opts_chunk$set(echo = TRUE)


## -------------------------------------------------------------------------------------------------------------------------------------
print('R')
cat('gogo')


## ---- eval = F------------------------------------------------------------------------------------------------------------------------
## getwd()


## -------------------------------------------------------------------------------------------------------------------------------------
setwd("C:/Users/Namtaek/Desktop/Studyroom_SungKyun/Statistical_Data_Analysis_21_01/Week2")


## -------------------------------------------------------------------------------------------------------------------------------------
3 + 8 # 더하기
3 - 1 # 빼기
3 * 4 # 곱하기
4/2 # 나누기
5%%3  # 나머지
5%/%3 # 몫


## -------------------------------------------------------------------------------------------------------------------------------------
x = 3; x
y <- 3; y
z = x+y;z

ch = 'hello world'
ch


## -------------------------------------------------------------------------------------------------------------------------------------
x = c(1, 3, 6, 10); x
x + 0.2
x[1]
x[3]


## -------------------------------------------------------------------------------------------------------------------------------------
c
q


## ---- eval = F------------------------------------------------------------------------------------------------------------------------
## help(c)
## ?c


## -------------------------------------------------------------------------------------------------------------------------------------
a1 = c(1, 2, 3)
a1
is.numeric(a1)
typeof(a1)
class(a1)


## -------------------------------------------------------------------------------------------------------------------------------------
b1 = c('a', 'b', '3')
b1
is.character(b1)
typeof(b1)
class(b1)


## -------------------------------------------------------------------------------------------------------------------------------------
b2 = c('1', '2', '5')
as.numeric(b2)
as.character(a1)


## -------------------------------------------------------------------------------------------------------------------------------------
c1 = c('a', 'b', 'a', 'a', 'b')
c1 = factor(c1) # as.factor(c1) 도 가능
c1
levels(c1)  # 팩터 레벨을 확인
is.factor(c1)
typeof(c1) # R을 팩터를 문자+수치 둘다로서 인식하는 느낌이 있다. 조금 복잡한것이 특성
class(c1)


## -------------------------------------------------------------------------------------------------------------------------------------
c2 = c('11', '9', '9', '11', '5', '11', '11')
c2 = as.factor(c2); c2
as.numeric(c2)


## -------------------------------------------------------------------------------------------------------------------------------------
as.numeric(as.character(c2))


## -------------------------------------------------------------------------------------------------------------------------------------
c(T, TRUE, F, FALSE)
d1 = TRUE; d1
d2 = 'TRUE'; d2
'a' == 'a'
'a' != 'b'


## -------------------------------------------------------------------------------------------------------------------------------------
NA
e1 = c(1, 3, NA, 6); e1
is.na(e1)

e1 = NULL; e1
0/0


## -------------------------------------------------------------------------------------------------------------------------------------
rm(list = ls())


## -------------------------------------------------------------------------------------------------------------------------------------
x = c(1, 5, 3, 12, 52)
length(x) # 벡터의 길이
x[1:5] # 인덱싱
x = c(x[1:3], 153, x[5]); x
x > 3
names(x) = c('g', 'b', 'a', 'b', 'c')
x


## -------------------------------------------------------------------------------------------------------------------------------------
seq(from = -2, to = 3, by = 1) # -2에서 3까지 1 간격으로 생성, seq는 sequence를 말한다.
rep(c(1,3), 3) # rep은 repeat를 말한다.
rep(c(1,3), each = 3)


## ---- eval = F------------------------------------------------------------------------------------------------------------------------
## x = c(1, 3, 5, 7); y = c(1, 3, 5); z = c(1, 3)
## x + y # 성분의 갯수가 배수관계가 아니면 더할 수 없다.


## -------------------------------------------------------------------------------------------------------------------------------------
x = c(1, 3, 5, 7); y = c(1, 3, 5); z = c(1, 3)
x + z # 배수관계면 알아서 더해준다! 이렇게 어느정도 봐주는게 R의 특징


## -------------------------------------------------------------------------------------------------------------------------------------
x = c(1,2,3,4)
sum(x); mean(x)


## -------------------------------------------------------------------------------------------------------------------------------------
x = c(x, NA)
mean(x)
mean(x, na.rm = T)


## -------------------------------------------------------------------------------------------------------------------------------------
x = c(1, 2, 3, NULL, 4)
x
sum(x)


## -------------------------------------------------------------------------------------------------------------------------------------
matrix(nrow = 2, ncol = 3)
x = 1:12
matrix(x, nrow = 3, ncol = 4) # default : byrow = F
matrix(x, nrow = 3, ncol = 4, byrow = T)


## -------------------------------------------------------------------------------------------------------------------------------------
A = matrix(x, nrow = 3, ncol = 4)
length(A)
dim(A)  # row - column


## -------------------------------------------------------------------------------------------------------------------------------------
A = matrix(1:4, 2, 2)
B = matrix(2:5, 2, 2)
A*B
A%*%B
t(A)
eigen(A)


## -------------------------------------------------------------------------------------------------------------------------------------
A = matrix(1:20, nrow = 5, ncol = 4)
rownames(A)
rownames(A) = c('a', 'b', 'c', 'd', 'e')
colnames(A) = c('a', 'b', 'c', 'd')
A[1:2, 3:4] # 숫자로 인덱싱하기
A[1:2, c('a', 'c')]  # 이름으로 인덱싱하기



## -------------------------------------------------------------------------------------------------------------------------------------
A = matrix(1:20, nrow = 5, ncol = 4); A
apply(A, 1, sum) # 1이면 열 별로 연산
apply(A, 2, mean, na.rm = T) # 2이면 행별로 연산
# 함수자리에는 직접 함수를 지정할 수 있고, 함수의 인자가 추가적으로 있을 경우 뒤에 붙여 쓰면 된다.


## -------------------------------------------------------------------------------------------------------------------------------------
x = c(1, 3, 5)
y = matrix(1:9, 3, 3)
rbind(x,y)
cbind(x,y)


## -------------------------------------------------------------------------------------------------------------------------------------
name = c('Kim', 'Park', 'Lee')
age = c(25, 23, 21)
male = c(T, F, T)
X = data.frame(name, age, male, stringsAsFactors = F) # character를 factor로 처리할건지. default는 R 4.0부터 F
X
cbind(name, age, male) # 행렬은 각각의 형태를 캐릭터로 통일해버렸다.


## -------------------------------------------------------------------------------------------------------------------------------------
str(X)
summary(X)
dim(X)


## -------------------------------------------------------------------------------------------------------------------------------------
X[1] # 데이터프레임
X[1:2] # 데이터프레임
X[[1]] # 벡터


## -------------------------------------------------------------------------------------------------------------------------------------
X[, 1:2]
X[1:2, ]
# 숫자로 인덱싱하는 것에는 차이가 없다.

X$name # 열 이름을 인덱싱하는것이 편리하다.
X$name = c('Tim', 'Lee', 'Lim')
X


## -------------------------------------------------------------------------------------------------------------------------------------
X = data.frame(x1 = c(6, 3, NA, 3, NA), x2 = 1:5, x3 = 7:11)
complete.cases(X)
X[complete.cases(X), ] # 결측값이 있는 행 제거
X[is.na(X)] = 0; X # 결측값을 0으로 대체


## -------------------------------------------------------------------------------------------------------------------------------------
data = mtcars
colnames(data)
# 우리가 mpg가 25이상, gear가 4단 이상인 자동차의 정보를 얻고 싶다면?
(data$mpg >= 25) & (data$gear >= 4)
data[(data$mpg >= 25) & (data$gear >= 4), ]


## -------------------------------------------------------------------------------------------------------------------------------------
average = function(x) {
  value = sum(x) / length(x)
  return(value) # return이 존재해야하는 경우가 대부분
}
y = c(1, 2, 3, 4, 5)
average(y)


## -------------------------------------------------------------------------------------------------------------------------------------
x = c(5, 6, 10, 7, 12)
z = NULL
for (k in x){
  z = c(z, k+3)
}
z


## -------------------------------------------------------------------------------------------------------------------------------------
z <- NULL
for (k in x) {
  z <- c(z, k + 3)
  if (k >= 10) break
}
z


## -------------------------------------------------------------------------------------------------------------------------------------
z <- NULL
for (k in x) {
  if (k >= 10) next
  z <- c(z, k + 3)
}
z


## -------------------------------------------------------------------------------------------------------------------------------------
x <- 0
while (x < 5){
  x <- x + 1
}
x


## -------------------------------------------------------------------------------------------------------------------------------------
x <- 0
while (x < 5){
  x <- x + 1
  if (x > 3) break
}
x


## -------------------------------------------------------------------------------------------------------------------------------------
x <- 0
repeat {
  x <- x + 1
  if (x >= 5) break
}
x


## -------------------------------------------------------------------------------------------------------------------------------------
r <- 3
if (r==4) {
  x <- 1
} else {
  x <- 3
  y <- 5
}
x
y


## -------------------------------------------------------------------------------------------------------------------------------------
r <- 3
if (r==4) {
  x <- 1
} else if (r == 3) {
  x <- 3
  y <- 5
} else {
  x = 7
}
x
y


## -------------------------------------------------------------------------------------------------------------------------------------
ifelse(c(3, 5, 7, 9, 11) > 3, 'a', 'b')


## -------------------------------------------------------------------------------------------------------------------------------------
ifelse(c(3, 5, 7, 9, 11) > 7, 'a', ifelse(c(3, 5, 7, 9, 11) > 4, 'b', 'c'))


## -------------------------------------------------------------------------------------------------------------------------------------
plot(c(0, 10), c(0, 20), type = "n", xlab = "X", ylab = "Y", 
     main = "Empty frame")
points(c(6, 8, 10, 6, 8, 10), c(5, 10, 15, 10, 15, 20), 
       col = "brown", cex = 2, pch = 20)
lines(c(0, 4, 4, 0, 0), c(5, 5, 15, 15, 5), col = "red", lwd = 2)
lines(c(1, 3, 3, 1, 1), c(7, 7, 12, 12, 7), col = "blue", lwd = 3, lty = 2)


## -------------------------------------------------------------------------------------------------------------------------------------
n <- 100
x <- runif(n, 1, 10)
y1 <- 0.5 * x + rnorm(n)
y2 <- 5 - 0.5 * x + rnorm(n)
plot(x, y1, xlab = "X", ylab = "Y")
points(x, y2, col = "blue", pch = 20)


## -------------------------------------------------------------------------------------------------------------------------------------
Time <- 1:10
stock1 <- c(15, 20, 17, 10, 20, 21, 18, 23, 25, 29)
stock2 <- c(10, 18, 11, 22, 27, 12, 25, 29, 26, 23)
plot(Time, stock1, type = "b", xlab = "Time", ylab = "Stock price")
lines(Time, stock2, type = "b", col = "red", lwd = 2, lty = 2)
legend(8.5, 15, c("A", "B"), col = c("black", "red"), 
       lty = c(1, 2), lwd = c(1, 2))


## -------------------------------------------------------------------------------------------------------------------------------------
x <- c(100, 250, 200)
barplot(x, names.arg = c("a", "b", "c"), ylab = "Products", main = "Products by factory")


## -------------------------------------------------------------------------------------------------------------------------------------
x <- rnorm(100)
hist(x, main = "Normal Distribution", freq = F)
lines(density(x), col = "red")


## -------------------------------------------------------------------------------------------------------------------------------------
x <- rnorm(100)
y <- rnorm(100, mean = 3, sd = 2)
z <- rnorm(100, mean = -1, sd = 1.5)
boxplot(x, y, z, names = c("A", "B", "C"), col = c("blue", "red", "green"))


## -------------------------------------------------------------------------------------------------------------------------------------
x <- c(6, 3, 4, 1, 5)
min(x)
max(x)
which.min(x)

 
## -------------------------------------------------------------------------------------------------------------------------------------
x <- seq(from = -3, to = 3, by = 0.01)
y <- dnorm(x, mean = 0, sd = 1, log = FALSE)
plot(y)


## ----figure1, echo = FALSE, fig.cap = 'Functions for Statistical Distribution', fig.align='center', out.width='60%'-------------------
knitr::include_graphics('K-074.png')


## -------------------------------------------------------------------------------------------------------------------------------------
x <- rbinom(2000, size = 50, prob = 1/5)
mean(x)
hist(x)
pbinom(2, 10, 0.3) - pbinom(1, 10, 0.3) # P(X <= 2) - P(X <= 1) == P(X == 2)


## -------------------------------------------------------------------------------------------------------------------------------------
qnorm(0.975, 0, 1)
pnorm(1.645, 0, 1)


## -------------------------------------------------------------------------------------------------------------------------------------
knitr::purl('Week 2.rmd','Week 2.R')

